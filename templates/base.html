<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VilloMed - Hospital Management System</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Your custom styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Medical Background Animation -->
    <div class="medical-background">
        <!-- DNA Strands -->
        <div class="dna-strand dna-1"></div>
        <div class="dna-strand dna-2"></div>
        <div class="dna-strand dna-3"></div>
        
        <!-- ECG Heartbeat Lines -->
        <div class="ecg-line ecg-1"></div>
        <div class="ecg-line ecg-2"></div>
        
        <!-- Floating Medical Icons -->
        <div class="medical-icon icon-1">
            <i class="fas fa-heartbeat"></i>
        </div>
        <div class="medical-icon icon-2">
            <i class="fas fa-stethoscope"></i>
        </div>
        <div class="medical-icon icon-3">
            <i class="fas fa-plus-circle"></i>
        </div>
        <div class="medical-icon icon-4">
            <i class="fas fa-prescription-bottle-alt"></i>
        </div>
        <div class="medical-icon icon-5">
            <i class="fas fa-brain"></i>
        </div>
        <div class="medical-icon icon-6">
            <i class="fas fa-lungs"></i>
        </div>
        
        <!-- Pulse Dots -->
        <div class="pulse-dot dot-1"></div>
        <div class="pulse-dot dot-2"></div>
        <div class="pulse-dot dot-3"></div>
        <div class="pulse-dot dot-4"></div>
        <div class="pulse-dot dot-5"></div>
    </div>

    {% if not request.endpoint or request.endpoint != 'login' and request.endpoint != 'register' %}
    <!-- Fixed Header -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: #1a1d20; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="{{ url_for('index') }}" style="color: #FFCB74;">
                <i class="fas fa-heartbeat me-2" style="color: #FFCB74;"></i>VilloMed
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('appointments') }}">Appointments</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('patients') }}">Patients</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('doctors') }}">Doctors</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('doctor_availability') }}">Availability</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    {% endif %}

    <!-- Main Content with padding for fixed header -->
    <main class="container mt-5 pt-4">
        {% block content %}{% endblock %}
    </main>

    {% if not request.endpoint or request.endpoint != 'login' and request.endpoint != 'register' %}
    <!-- Footer -->
    <footer class="bg-dark text-white pt-5 pb-4 mt-5" style="background-color: #1a1d20 !important;">
        <div class="container">
            <div class="row">
                <!-- Brand and Description -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <h5 class="text-uppercase mb-4" style="color: #FFCB74;">
                        <i class="fas fa-heartbeat me-2" style="color: #FFCB74;"></i>VilloMed
                    </h5>
                    <p class="text-light">
                        Streamlining healthcare management with modern technology and compassionate patient care. 
                        Our system helps medical professionals deliver exceptional service.
                    </p>
                    <div class="mt-3">
                        <a href="#" class="text-white me-2"><i class="fab fa-facebook-f fa-lg"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-linkedin-in fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="text-uppercase mb-4" style="color: #FFCB74;">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="{{ url_for('index') }}" class="text-light text-decoration-none">Home</a></li>
                        <li class="mb-2"><a href="{{ url_for('appointments') }}" class="text-light text-decoration-none">Appointments</a></li>
                        <li class="mb-2"><a href="{{ url_for('patients') }}" class="text-light text-decoration-none">Patients</a></li>
                        <li class="mb-2"><a href="{{ url_for('doctors') }}" class="text-light text-decoration-none">Doctors</a></li>
                    </ul>
                </div>

                <!-- System Links -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <h5 class="text-uppercase mb-4" style="color: #FFCB74;">System</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="{{ url_for('logout') }}" class="text-light text-decoration-none">Logout</a></li>
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">User Guide</a></li>
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">Support</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <h5 class="text-uppercase mb-4" style="color: #FFCB74;">Contact Info</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2 text-light"><i class="fas fa-map-marker-alt me-2" style="color: #FFCB74;"></i> 123 Medical Center Dr</li>
                        <li class="mb-2 text-light"><i class="fas fa-phone me-2" style="color: #FFCB74;"></i> (+264) 81 629-2228</li>
                        <li class="mb-2 text-light"><i class="fas fa-envelope me-2" style="color: #FFCB74;"></i> support@villomed.com</li>
                        <li class="mb-2 text-light"><i class="fas fa-clock me-2" style="color: #FFCB74;"></i> Mon-Fri: 8AM-6PM</li>
                    </ul>
                </div>
            </div>

            <hr class="my-4 bg-secondary">

            <!-- Copyright and Bottom Links -->
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="text-light mb-0">&copy; 2025 Villo-Med. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-light text-decoration-none me-3">Privacy Policy</a>
                    <a href="#" class="text-light text-decoration-none me-3">Terms of Service</a>
                    <a href="#" class="text-light text-decoration-none">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>
    {% endif %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Add this RIGHT AFTER all your modal HTML, before the styles -->
<div class="modal-backdrop-fix"></div>

<style>
/* Force remove any stuck backdrops */
.modal-backdrop {
    display: none !important;
}
body.modal-open {
    overflow: auto !important;
    padding-right: 0 !important;
}
</style>

<script>
// COMPLETE MODAL FIX
document.addEventListener('DOMContentLoaded', function() {
    // Fix for all modal close buttons
    document.querySelectorAll('[data-bs-dismiss="modal"], .btn-close, .btn-outline-secondary').forEach(button => {
        button.addEventListener('click', function() {
            // Force hide all modals
            var modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                var modalInstance = bootstrap.Modal.getInstance(modal);
                if (modalInstance) {
                    modalInstance.hide();
                }
                modal.style.display = 'none';
            });
            
            // Force remove backdrops
            document.querySelectorAll('.modal-backdrop').forEach(backdrop => {
                backdrop.remove();
            });
            
            // Force reset body
            document.body.classList.remove('modal-open');
            document.body.style.overflow = 'auto';
            document.body.style.paddingRight = '0';
        });
    });

    // Prevent multiple modals from opening
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('show.bs.modal', function() {
            // Hide all other modals first
            document.querySelectorAll('.modal').forEach(otherModal => {
                if (otherModal !== modal) {
                    var otherInstance = bootstrap.Modal.getInstance(otherModal);
                    if (otherInstance) {
                        otherInstance.hide();
                    }
                }
            });
        });
    });
});

// Emergency fix - run this in browser console if stuck
function forceCloseModals() {
    document.querySelectorAll('.modal').forEach(modal => {
        modal.style.display = 'none';
        modal.classList.remove('show');
    });
    document.querySelectorAll('.modal-backdrop').forEach(backdrop => backdrop.remove());
    document.body.classList.remove('modal-open');
    document.body.style.overflow = 'auto';
}
</script>
</body>
</html>